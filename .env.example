# =============================================================================
# Educa.SA - Variáveis de Ambiente
# =============================================================================
# Copie este arquivo para .env e configure os valores conforme necessário
#
# Comandos úteis:
#   make setup       - Configuração inicial do projeto
#   make link-env    - Cria links simbólicos para web-app/.env e microservice-go/.env
# =============================================================================

# =============================================================================
# WEB APP (Nuxt)
# =============================================================================

# Database - SQLite/Prisma
DATABASE_URL="file:./database/educasa_dev.db"

# JWT Secret - MUDAR EM PRODUÇÃO
# Gerar com: openssl rand -base64 32
JWT_SECRET="your-secret-key-change-in-production"

# App Environment
NODE_ENV="development"

# Sentry - Error Tracking (opcional)
SENTRY_DSN=""
SENTRY_DEBUG="false"
SENTRY_LOG_LEVEL="error"

# Email Administrativo (para receber exportações)
EXPORT_TO_EMAIL="administrativo@escola.com"

# Cron Jobs
CRON_ENABLED="false"
# Gerar com: openssl rand -base64 32
CRON_SECRET=""

# Go Worker Integration
# URL do serviço Go worker (uso interno Docker ou localhost)
GO_WORKER_URL="http://go-worker:8080"
# Gerar com: openssl rand -base64 32
GO_WORKER_API_KEY=""

# =============================================================================
# MICROSERVICE GO
# =============================================================================

# === Turso Cloud (Produção) ===
# URL do Turso (libsql:// URL)
TURSO_DATABASE_URL="libsql://your-database.turso.io"
# Token de autenticação do Turso
# Obter em: https://api.turso.tech/v1/orgs
TURSO_AUTH_TOKEN="your-auth-token"

# === SQLite Local (Desenvolvimento - Fallback) ===
# DATABASE_URL="file:/data/database/educasa_dev.db"

# === SMTP Email Configuration ===
# Host SMTP (Zeptomail: smtp.zeptomail.com)
SMTP_HOST="smtp.zeptomail.com"
# Porta SMTP (587 para TLS, 465 para SSL)
SMTP_PORT="587"
# Usuário SMTP (Zeptomail usa "emailapikey")
SMTP_USERNAME="emailapikey"
# Senha SMTP (Token do Zeptomail)
SMTP_PASSWORD=""
# Email de origem
SMTP_FROM_EMAIL="noreply@educasa.app.br"
# Nome de origem
SMTP_FROM_NAME="Educa.SA"

# === API Security ===
# Chave compartilhada entre Nuxt e Go Worker (deve ser a mesma do WEB APP)
GO_WORKER_API_KEY="change-this-in-production"

# === Worker Configuration ===
# Tamanho do batch (alunos por email)
BATCH_SIZE="20"
# Número máximo de jobs processando simultaneamente
MAX_CONCURRENT_JOBS="3"
# Intervalo de polling na fila (ex: 5s, 10s)
WORKER_POLL_INTERVAL="5s"
# Timeout para processamento de cada job (em minutos)
JOB_TIMEOUT_MINUTES="30"

# === Export Configuration ===
# Email administrativo que receberá as exportações (deve ser o mesmo do WEB APP)
EXPORT_TO_EMAIL="administrativo@escola.com"

# === Cron/Scheduler ===
# Habilitar scheduler interno
ENABLE_SCHEDULER="true"
# Expressão cron para exportação mensal (dia 1 às 00:00)
MONTHLY_CRON="0 0 1 * *"

# === Server ===
# Porta do servidor HTTP
SERVER_PORT="8080"
# Host para bind (0.0.0.0 para Docker)
SERVER_HOST="0.0.0.0"

# === Logging ===
# Nível de log: debug, info, warn, error
GO_LOG_LEVEL="info"
# Formato: json, text
GO_LOG_FORMAT="json"
